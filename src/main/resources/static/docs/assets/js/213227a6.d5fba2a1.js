"use strict";(self.webpackChunkclias_docs=self.webpackChunkclias_docs||[]).push([[9731],{2826:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"dev/Notificaciones/notificaciones_movil","title":"Notificaciones - Manejo en la app m\xf3vil","description":"---","source":"@site/docs/dev/Notificaciones/notificaciones_movil.md","sourceDirName":"dev/Notificaciones","slug":"/dev/Notificaciones/notificaciones_movil","permalink":"/docs/dev/Notificaciones/notificaciones_movil","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Notificaciones - Manejo en la app m\xf3vil","sidebar_label":"Manejo en la app m\xf3vil","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Introducci\xf3n","permalink":"/docs/dev/Notificaciones/description"},"next":{"title":"Env\xedo manual (Script)","permalink":"/docs/dev/Notificaciones/notificaciones_envio_manual"}}');var s=i(4848),c=i(8453);const l={title:"Notificaciones - Manejo en la app m\xf3vil",sidebar_label:"Manejo en la app m\xf3vil",sidebar_position:1},r=void 0,o={},t=[{value:"Clics y pantallas",id:"clics-y-pantallas",level:2},{value:"El campo <code>accion</code> y la escalabilidad",id:"el-campo-accion-y-la-escalabilidad",level:2},{value:"Ejemplo: notificaci\xf3n de actualizaci\xf3n de app",id:"ejemplo-notificaci\xf3n-de-actualizaci\xf3n-de-app",level:2},{value:"Buenas pr\xe1cticas y consideraciones",id:"buenas-pr\xe1cticas-y-consideraciones",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"clics-y-pantallas",children:"Clics y pantallas"}),"\n",(0,s.jsx)(n.p,{children:"Cuando llega una notificaci\xf3n push:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["La app registra callbacks FCM y, si est\xe1 en primer plano, ",(0,s.jsx)(n.strong,{children:"muestra tambi\xe9n una local"})," con ",(0,s.jsx)(n.code,{children:"FlutterLocalNotifications"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Al ",(0,s.jsx)(n.strong,{children:"tocar"})," la notificaci\xf3n:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Se ",(0,s.jsx)(n.strong,{children:"marca como le\xedda"})," en el backend."]}),"\n",(0,s.jsxs)(n.li,{children:["La app ",(0,s.jsx)(n.strong,{children:"navega"})," seg\xfan ",(0,s.jsx)(n.code,{children:"tipoNotificacion"})," y/o ",(0,s.jsx)(n.code,{children:"accion"}),":"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Flujos principales"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"RESULTADO"}),(0,s.jsx)(n.br,{}),"\n","Verifica ficha socioecon\xf3mica y encuesta SUS:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Si falta ficha \u2192 redirige al formulario obligatorio."}),"\n",(0,s.jsxs)(n.li,{children:["Si falta encuesta \u2192 redirige a ",(0,s.jsx)(n.strong,{children:"SUS"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Si todo OK \u2192 ",(0,s.jsx)(n.strong,{children:"muestra el resultado"})," (utilidad en ",(0,s.jsx)(n.code,{children:"ResultadoUtils"}),")."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"RECORDATORIO_NO_EXAMEN"}),(0,s.jsx)(n.br,{}),"\n","Lleva al ",(0,s.jsx)(n.strong,{children:"Dashboard"})," y enfoca la pesta\xf1a principal para retomar el proceso."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"RECORDATORIO_NO_ENTREGA_DISPOSITIVO"}),(0,s.jsx)(n.br,{}),"\n","Muestra di\xe1logo de confirmaci\xf3n; si la usuaria confirma, la app llama al backend para ",(0,s.jsx)(n.strong,{children:"desactivar"})," futuros recordatorios."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Otros (p. ej., ",(0,s.jsx)(n.code,{children:"BIENVENIDA"})," o \u201cinformativos\u201d):"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Si ",(0,s.jsx)(n.code,{children:"accion"})," es ",(0,s.jsx)(n.strong,{children:"URL externa"}),", la abre con ",(0,s.jsx)(n.code,{children:"url_launcher"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Si ",(0,s.jsx)(n.code,{children:"accion"})," es una ",(0,s.jsx)(n.strong,{children:"ruta interna"}),", navega en la app (p. ej., pesta\xf1a \u201cRecursos\u201d)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Una ruta interna se define porque en su estructura, el apartado de ",(0,s.jsx)(n.strong,{children:"accion"})," tiene un URL que comienza con ",(0,s.jsxs)(n.em,{children:['"',(0,s.jsx)(n.a,{href:"https://miapp.com/",children:"https://miapp.com/"}),'"']}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"el-campo-accion-y-la-escalabilidad",children:["El campo ",(0,s.jsx)(n.code,{children:"accion"})," y la escalabilidad"]}),"\n",(0,s.jsxs)(n.p,{children:["El campo ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"accion"})})," se dise\xf1\xf3 como un par\xe1metro flexible que permite definir el ",(0,s.jsx)(n.strong,{children:"comportamiento al abrir la notificaci\xf3n"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Rutas internas"}),(0,s.jsx)(n.br,{}),"\n","Se reconocen porque la acci\xf3n comienza con el patr\xf3n ",(0,s.jsx)(n.code,{children:"https://miapp.com/"}),".",(0,s.jsx)(n.br,{}),"\n","Esto indica que el destino est\xe1 dentro de la propia aplicaci\xf3n m\xf3vil.",(0,s.jsx)(n.br,{}),"\n","Ejemplo: abrir directamente la pesta\xf1a de ",(0,s.jsx)(n.em,{children:"Recursos"})," en el Dashboard."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"URLs externas"}),(0,s.jsx)(n.br,{}),"\n","Si ",(0,s.jsx)(n.code,{children:"accion"})," no empieza con el dominio interno, se interpreta como un ",(0,s.jsx)(n.strong,{children:"enlace web externo"}),".",(0,s.jsx)(n.br,{}),"\n","En este caso, al tocar la notificaci\xf3n se abre un ",(0,s.jsx)(n.code,{children:"AlertDialog"})," que muestra t\xedtulo, mensaje y un bot\xf3n ",(0,s.jsx)(n.strong,{children:"Navegar"})," que redirige al navegador del dispositivo."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Este dise\xf1o se pens\xf3 para ",(0,s.jsx)(n.strong,{children:"mayor escalabilidad"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Permite en un futuro crear nuevas notificaciones que lleven a secciones internas de la app sin cambios profundos en el c\xf3digo."}),"\n",(0,s.jsxs)(n.li,{children:["Tambi\xe9n habilita enviar notificaciones ",(0,s.jsx)(n.strong,{children:"informativas o promocionales"})," que redirijan a un sitio web externo del proyecto (o de aliados)."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ejemplo-notificaci\xf3n-de-actualizaci\xf3n-de-app",children:"Ejemplo: notificaci\xf3n de actualizaci\xf3n de app"}),"\n",(0,s.jsx)(n.p,{children:"Un caso pr\xe1ctico es la notificaci\xf3n de actualizaci\xf3n de la aplicaci\xf3n:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Datos de la notificaci\xf3n\nTITULO = "Actualiza tu App SISA"\nMENSAJE = (\n    "Ya est\xe1 disponible la nueva versi\xf3n de la app. Ingresa a https://clias.ucuenca.edu.ec/ "\n    "y ve al apartado \'Descarga la Aplicaci\xf3n M\xf3vil\'."\n)\nTIPO = "ACTUALIZACION_APP"\nTIPO_ACCION = "NUEVO_RECURSO"\nACCION = "https://clias.ucuenca.edu.ec/"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Al recibir esta notificaci\xf3n, la app muestra un mensaje al usuario con el t\xedtulo y contenido, y al dar clic en ",(0,s.jsx)(n.strong,{children:"Navegar"}),", lo redirige al sitio web oficial del proyecto CLIAS para descargar la \xfaltima versi\xf3n."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"buenas-pr\xe1cticas-y-consideraciones",children:"Buenas pr\xe1cticas y consideraciones"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Mantener ",(0,s.jsx)(n.code,{children:"accion"})," coherente con el ",(0,s.jsx)(n.strong,{children:"destino real"})," (ruta interna vs URL externa)."]}),"\n",(0,s.jsxs)(n.li,{children:["Para enlaces externos, siempre verificar que sean ",(0,s.jsx)(n.strong,{children:"seguros (HTTPS)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Evitar \u201cspam\u201d: confiar en las ",(0,s.jsx)(n.strong,{children:"reglas de autocancelaci\xf3n"})," y ",(0,s.jsx)(n.code,{children:"limiteFecha"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Mantener ",(0,s.jsx)(n.strong,{children:"m\xfaltiples tokens"})," por usuario actualizados (limpieza en logout/cambio de dispositivo)."]}),"\n",(0,s.jsxs)(n.li,{children:["Usar ",(0,s.jsx)(n.code,{children:"marcarNotificacionComoLeida"})," al abrir para mantener el ",(0,s.jsx)(n.strong,{children:"estado sincronizado"})," y mejorar UX (badges/puntos rojos)."]}),"\n",(0,s.jsxs)(n.li,{children:["Centralizar los ",(0,s.jsx)(n.strong,{children:"textos"})," (",(0,s.jsx)(n.code,{children:"titulo"}),"/",(0,s.jsx)(n.code,{children:"mensaje"}),") en constantes o plantillas para consistencia."]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var a=i(6540);const s={},c=a.createContext(s);function l(e){const n=a.useContext(c);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),a.createElement(c.Provider,{value:n},e.children)}}}]);