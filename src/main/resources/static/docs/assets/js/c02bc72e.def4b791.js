"use strict";(self.webpackChunkclias_docs=self.webpackChunkclias_docs||[]).push([[9231],{4906:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"dev/frontend_web/setup","title":"Frontend Web - Despliegue de la App Web (Flutter Web)","description":"---","source":"@site/docs/dev/frontend_web/setup.md","sourceDirName":"dev/frontend_web","slug":"/dev/frontend_web/setup","permalink":"/docs/dev/frontend_web/setup","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Frontend Web - Despliegue de la App Web (Flutter Web)","sidebar_label":"Despliegue de la App Web","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Seguridad (JWT)","permalink":"/docs/dev/frontend_web/security"}}');var i=s(4848),l=s(8453);const d={title:"Frontend Web - Despliegue de la App Web (Flutter Web)",sidebar_label:"Despliegue de la App Web",sidebar_position:6},c=void 0,a={},t=[{value:"Requisitos",id:"requisitos",level:2},{value:"Ejecuci\xf3n del proyecto en Local",id:"ejecuci\xf3n-del-proyecto-en-local",level:2},{value:"Compilaci\xf3n para Producci\xf3n",id:"compilaci\xf3n-para-producci\xf3n",level:2},{value:"Ajustes Necesarios de assets del build",id:"ajustes-necesarios-de-assets-del-build",level:2},{value:"Integraci\xf3n con el backend",id:"integraci\xf3n-con-el-backend",level:2},{value:"Verificaci\xf3n",id:"verificaci\xf3n",level:2},{value:"Problemas comunes",id:"problemas-comunes",level:2},{value:"Recomendaciones de seguridad",id:"recomendaciones-de-seguridad",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["Esta gu\xeda explica c\xf3mo ",(0,i.jsx)(n.strong,{children:"construir y desplegar la app web"})," (frontend hecho en ",(0,i.jsx)(n.strong,{children:"Flutter Web"}),") junto al backend de ",(0,i.jsx)(n.strong,{children:"IA - VPH"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"requisitos",children:"Requisitos"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Flutter SDK"})," instalado y configurado para web (Chrome o Edge)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Git"})," 2.40+"]}),"\n",(0,i.jsxs)(n.li,{children:["IDE recomendado: ",(0,i.jsx)(n.strong,{children:"VS Code"})," (aunque puedes usar cualquier IDE)."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Verificar entorno Flutter"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'flutter doctor\nflutter --version\nflutter devices   # Debe listar "Chrome" / "Edge" como dispositivo web\n'})}),"\n",(0,i.jsx)(n.h2,{id:"ejecuci\xf3n-del-proyecto-en-local",children:"Ejecuci\xf3n del proyecto en Local"}),"\n",(0,i.jsx)(n.p,{children:"Repositorio del frontend web:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/midaro99/telemedicina_web.git\ncd telemedicina_web\n"})}),"\n",(0,i.jsx)(n.p,{children:"Instalar dependencias y lo ejecutamos"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"flutter pub get\nflutter run \n"})}),"\n",(0,i.jsx)(n.h2,{id:"compilaci\xf3n-para-producci\xf3n",children:"Compilaci\xf3n para Producci\xf3n"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Build con base path"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"flutter build web --base-href /web/\n"})}),"\n",(0,i.jsx)(n.p,{children:"\xbfPor qu\xe9 --base-href /web/?\nPorque la app no se servir\xe1 desde la ra\xedz (/), sino desde la ruta /web/ dentro del backend (Spring Boot la servir\xe1 desde src/main/resources/static/web)."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Flutter genera rutas y assets relativos al ",(0,i.jsx)(n.code,{children:'<base href="/web/">'}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Si no usas --base-href /web/, el navegador intentar\xe1 cargar /main.dart.js, /assets/... desde la ra\xedz del dominio y dar\xe1 404."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Con --base-href /web/, todos los assets quedan referenciados correctamente como /web/main.dart.js, /web/assets/...."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Al finalizar, Flutter genera la carpeta:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"telemedicina_web/build/web\n\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ajustes-necesarios-de-assets-del-build",children:"Ajustes Necesarios de assets del build"}),"\n",(0,i.jsx)(n.p,{children:"Dependiendo de la versi\xf3n de Flutter y c\xf3mo est\xe9n declarados los assets en pubspec.yaml, es posible que el build produzca una estructura anidada assets/assets/....\nPara el despliegue en nuestro backend, normalizamos estas rutas:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Mover fuentes"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Origen:"}),"  ",(0,i.jsx)(n.code,{children:" build/web/assets/assets/fonts/"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Destino:"}),"  ",(0,i.jsx)(n.code,{children:" build/web/assets/fonts/"})]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Mover im\xe1genes"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Origen:"}),"  ",(0,i.jsx)(n.code,{children:" build/web/assets/assets/images/"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Destino:"}),"  ",(0,i.jsx)(n.code,{children:" build/web/assets/"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Si alguna carpeta no existe (por ejemplo, no hay images), simplemente omite ese paso."}),"\n",(0,i.jsx)(n.h2,{id:"integraci\xf3n-con-el-backend",children:"Integraci\xf3n con el backend"}),"\n",(0,i.jsx)(n.p,{children:"Nuestra app web se servir\xe1 desde el backend (Spring Boot), en la ruta /web."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ir a la carpeta est\xe1tica del backend"}),"\n",(0,i.jsx)(n.code,{children:"<BACKEND>/src/main/resources/static/web "})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reemplzar Archivos"}),"\nCopia el contenido de:  ",(0,i.jsx)(n.code,{children:"telemedicina_web/build/web"})," dentro de  ",(0,i.jsx)(n.code,{children:"<BACKEND>/src/main/resources/static/web "})]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Reemplaza los archivos existentes (siempre son 12)."}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Reiniciar/Reconstruir el backend"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Si corres en local desde IntelliJ, basta con re-ejecutar."}),"\n",(0,i.jsx)(n.li,{children:"Si usas Docker en producci\xf3n, reconstruye la imagen del backend y lev\xe1ntala."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"verificaci\xf3n",children:"Verificaci\xf3n"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Local:"}),"\n",(0,i.jsx)(n.a,{href:"http://localhost:8080/web",children:"http://localhost:8080/web"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Producci\xf3n:"}),"\n",(0,i.jsx)(n.a,{href:"https://clias.ucuenca.edu.ec/web",children:"https://clias.ucuenca.edu.ec/web"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"problemas-comunes",children:"Problemas comunes"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Error"}),(0,i.jsx)(n.th,{children:"Posible causa"}),(0,i.jsx)(n.th,{children:"Soluci\xf3n"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"404"})," en assets"]}),(0,i.jsxs)(n.td,{children:["No usaste ",(0,i.jsx)(n.code,{children:"--base-href /web/"})]}),(0,i.jsx)(n.td,{children:"Reconstruir con la opci\xf3n correcta"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"assets/assets/..."})," duplicados"]}),(0,i.jsx)(n.td,{children:"Versi\xf3n de Flutter"}),(0,i.jsxs)(n.td,{children:["Mover manualmente a ",(0,i.jsx)(n.code,{children:"assets/"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Error CORS en llamadas al backend"}),(0,i.jsx)(n.td,{children:"Backend no acepta origen del frontend"}),(0,i.jsx)(n.td,{children:"Configurar CORS en Spring Boot"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"401 Unauthorized"})}),(0,i.jsx)(n.td,{children:"Token JWT expirado o ausente"}),(0,i.jsx)(n.td,{children:"Reautenticar al usuario"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"recomendaciones-de-seguridad",children:"Recomendaciones de seguridad"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Servir ",(0,i.jsx)(n.strong,{children:"siempre bajo HTTPS"})," en entornos productivos."]}),"\n",(0,i.jsxs)(n.li,{children:["Restringir ",(0,i.jsx)(n.strong,{children:"CORS"})," solo a los dominios del frontend autorizado."]}),"\n",(0,i.jsx)(n.li,{children:"Mantener separados los entornos (local vs producci\xf3n)."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>c});var r=s(6540);const i={},l=r.createContext(i);function d(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);