<!doctype html>
<html lang="es" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-dev/frontend_app/arquitectura_general" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">App M√≥vil SISA - Arquitectura General | Documentaci√≥n del Proyecto</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://clias.ucuenca.edu.ec/docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://clias.ucuenca.edu.ec/docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://clias.ucuenca.edu.ec/docs/dev/frontend_app/arquitectura_general"><meta data-rh="true" property="og:locale" content="es"><meta data-rh="true" name="docusaurus_locale" content="es"><meta data-rh="true" name="docsearch:language" content="es"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="App M√≥vil SISA - Arquitectura General | Documentaci√≥n del Proyecto"><meta data-rh="true" name="description" content="Esta secci√≥n describe c√≥mo est√° organizada la _app_ m√≥vil SISA a nivel de capas, m√≥dulos y flujos internos, y c√≥mo se integra con los servicios de backend y con Firebase Cloud Messaging (FCM) para notificaciones. El foco es la aplicaci√≥n m√≥vil; se citan componentes del backend solo cuando es imprescindible para entender la integraci√≥n."><meta data-rh="true" property="og:description" content="Esta secci√≥n describe c√≥mo est√° organizada la _app_ m√≥vil SISA a nivel de capas, m√≥dulos y flujos internos, y c√≥mo se integra con los servicios de backend y con Firebase Cloud Messaging (FCM) para notificaciones. El foco es la aplicaci√≥n m√≥vil; se citan componentes del backend solo cuando es imprescindible para entender la integraci√≥n."><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://clias.ucuenca.edu.ec/docs/dev/frontend_app/arquitectura_general"><link data-rh="true" rel="alternate" href="https://clias.ucuenca.edu.ec/docs/dev/frontend_app/arquitectura_general" hreflang="es"><link data-rh="true" rel="alternate" href="https://clias.ucuenca.edu.ec/docs/dev/frontend_app/arquitectura_general" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Manual de Desarrollador","item":"https://clias.ucuenca.edu.ec/docs/category/manual-de-desarrollador"},{"@type":"ListItem","position":2,"name":"Arquitectura General","item":"https://clias.ucuenca.edu.ec/docs/dev/frontend_app/arquitectura_general"}]}</script><link rel="stylesheet" href="/docs/assets/css/styles.aadc4ef1.css">
<script src="/docs/assets/js/runtime~main.f19bda7d.js" defer="defer"></script>
<script src="/docs/assets/js/main.698e21f0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Saltar al contenido principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Saltar al contenido principal</a></div><nav aria-label="Principal" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Alternar barra lateral" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"></a><div class="navbar__item">
            <div style="display:flex; align-items:center; gap:8px;">
              <a href="https://www.ucuenca.edu.ec" target="_blank" rel="noopener noreferrer">
                <img src="/docs/img/logos/logo.png" alt="Logo UCuenca" style="height:48px;">
              </a>
              <a href="https://clias.ucuenca.edu.ec" target="_blank" rel="noopener noreferrer">
                <img src="/docs/img/logos/clias.png" alt="Logo CLIAS" style="height:48px;">
              </a>
            </div>
          </div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Volver al principio" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Barra lateral de Documentos" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Documentaci√≥n Oficial</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/manual-de-administrador-web">Manual de Administrador (Web)</a><button aria-label="Colapsar categor√≠a &#x27;Manual de Administrador (Web)&#x27; de la barra lateral" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/admin/intro">Introducci√≥n para Administradores</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/admin/gestionar_usuarios">Gestionar Usuarios</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/admin/status_dispositivos">Status de Dispositivos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/admin/generacion_codigos">Generaci√≥n de C√≥digos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/admin/servicios_relacionados">Localizaci√≥n de Servicios Relacionados</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/manual-de-usuario-app-m√≥vil">Manual de Usuario (App M√≥vil)</a><button aria-label="Ampliar la categor√≠a &#x27;Manual de Usuario (App M√≥vil)&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/manual-de-desarrollador">Manual de Desarrollador</a><button aria-label="Colapsar categor√≠a &#x27;Manual de Desarrollador&#x27; de la barra lateral" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/intro">Introducci√≥n para Desarrolladores</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/dev/Backend/description">Backend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/dev/Notificaciones/description">Notificaciones para desarrolladores</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/dev/chatbot/description">Chatbot</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/dev/frontend_app/introduccion_sisa">Frontend M√≥vil</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/frontend_app/introduccion_sisa">Introducci√≥n</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/dev/frontend_app/arquitectura_general">Arquitectura General</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/frontend_app/modulos_principales">M√≥dulos Principales</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/frontend_app/servicios_apis">Servicios y APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/frontend_app/notificaciones_push">Notificaciones Push</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dev/frontend_app/configuracion_despliegue">Configuraci√≥n y Despliegue</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/dev/frontend_web/description">Frontend Web</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Rastro de navegaci√≥n"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="P√°gina de Inicio" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/manual-de-desarrollador"><span>Manual de Desarrollador</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Frontend M√≥vil</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Arquitectura General</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">En esta p√°gina</button></div><div class="theme-doc-markdown markdown"><header><h1>Arquitectura General</h1></header>
<p>Esta secci√≥n describe <strong>c√≥mo est√° organizada la <em>app</em> m√≥vil SISA</strong> a nivel de capas, m√≥dulos y flujos internos, y <strong>c√≥mo se integra</strong> con los servicios de backend y con <strong>Firebase Cloud Messaging (FCM)</strong> para notificaciones. El foco es la <strong>aplicaci√≥n m√≥vil</strong>; se citan componentes del backend solo cuando es imprescindible para entender la integraci√≥n.</p>
<blockquote>
<p>Nota: La documentaci√≥n en ingl√©s (DeepWiki ‚Äì <em>TelemedicinaApp</em>) es de referencia y no siempre refleja los m√≥dulos m√°s recientes. Aqu√≠ se presenta la <strong>versi√≥n actualizada</strong> aplicada a SISA.</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vista-de-alto-nivel-app--servicios--backend">Vista de Alto Nivel (App ‚Äì Servicios ‚Äì Backend)<a href="#vista-de-alto-nivel-app--servicios--backend" class="hash-link" aria-label="Enlace directo al Vista de Alto Nivel (App ‚Äì Servicios ‚Äì Backend)" title="Enlace directo al Vista de Alto Nivel (App ‚Äì Servicios ‚Äì Backend)">‚Äã</a></h2>
<div style="display:flex;justify-content:center;margin:12px 0"><div style="transform:scale(0.85);transform-origin:top center"></div></div>
<p><strong>Claves de la vista:</strong></p>
<ul>
<li>La <em>app</em> est√° organizada en <strong>Presentaci√≥n ‚Üí Estado ‚Üí Servicios ‚Üí Almacenamiento/HTTP</strong>.</li>
<li>Los <strong>Servicios</strong> encapsulan la comunicaci√≥n con el backend y la gesti√≥n local (segura y cach√©).</li>
<li>Las <strong>notificaciones</strong> se env√≠an desde el backend a <strong>FCM</strong>, y el dispositivo las recibe a trav√©s del <strong>handler</strong> nativo/Flutter.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="relaci√≥n-entre-las-capas-en-la-vista-de-alto-nivel">Relaci√≥n entre las capas en la Vista de Alto Nivel<a href="#relaci√≥n-entre-las-capas-en-la-vista-de-alto-nivel" class="hash-link" aria-label="Enlace directo al Relaci√≥n entre las capas en la Vista de Alto Nivel" title="Enlace directo al Relaci√≥n entre las capas en la Vista de Alto Nivel">‚Äã</a></h3>
<p>En el diagrama de arquitectura se distinguen tres niveles principales dentro de la aplicaci√≥n:</p>
<ul>
<li>
<p><strong>Capa de Presentaci√≥n (Pantallas, Widgets)</strong><br>
<!-- -->Se encarga √∫nicamente de mostrar los datos al usuario y de recolectar sus interacciones.<br>
<!-- -->Ejemplos: pantalla de login, formularios de encuestas, dashboard de resultados.</p>
</li>
<li>
<p><strong>Gesti√≥n de Estado</strong><br>
<!-- -->Representa la capa intermedia donde se mantiene la informaci√≥n viva de la aplicaci√≥n.<br>
<!-- -->Aqu√≠ se conserva y actualiza el estado actual de la app, como:</p>
<ul>
<li>Usuario autenticado.</li>
<li>Notificaciones disponibles.</li>
<li>Encuestas pendientes de env√≠o.</li>
</ul>
<p>En <strong>SISA</strong>, un ejemplo concreto es el archivo <code>notification_state.dart</code>, que administra el estado de las notificaciones recibidas y asegura que la interfaz se actualice en tiempo real.</p>
</li>
<li>
<p><strong>Servicios (<code>service/*.dart</code>)</strong><br>
<!-- -->Son responsables de ejecutar la l√≥gica ‚Äúexterna‚Äù:</p>
<ul>
<li>Comunicarse con el backend v√≠a API REST (con el cliente <code>Dio</code>).</li>
<li>Guardar y recuperar datos en <code>SecureStorage</code> o en cach√©.</li>
<li>Registrar y manejar el token en <strong>Firebase Cloud Messaging (FCM)</strong>.</li>
</ul>
</li>
</ul>
<blockquote>
<p>üîë <strong>Nota:</strong> La ‚ÄúGesti√≥n de Estado‚Äù no corresponde a un archivo espec√≠fico, sino a un <strong>patr√≥n de dise√±o</strong> que organiza c√≥mo la UI interact√∫a con los servicios. De esta forma, se asegura que la app permanezca coherente, extensible y preparada para manejar conectividad limitada.</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="arquitectura-interna-de-la-app-capas-y-m√≥dulos">Arquitectura Interna de la App (capas y m√≥dulos)<a href="#arquitectura-interna-de-la-app-capas-y-m√≥dulos" class="hash-link" aria-label="Enlace directo al Arquitectura Interna de la App (capas y m√≥dulos)" title="Enlace directo al Arquitectura Interna de la App (capas y m√≥dulos)">‚Äã</a></h2>
<div style="display:flex;justify-content:center;margin:12px 0"><div style="transform:scale(0.85);transform-origin:top center"></div></div>
<p><strong>Ideas clave:</strong></p>
<ul>
<li>Los servicios est√°n <strong>desacoplados</strong> de la UI y de la gesti√≥n de estado.</li>
<li><code>connectivity_service.dart</code> define el <strong>comportamiento offline-first</strong> (validar conexi√≥n antes de llamar al backend y sincronizar cuando vuelve internet).</li>
<li><code>firebase_messaging_handler.dart</code> + <code>notification_state.dart</code> gobiernan el <strong>ciclo de vida de notificaciones</strong> (foreground/background/taps).</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="estrategia-offline-first-y-manejo-de-errores">Estrategia <em>Offline-First</em> y Manejo de Errores<a href="#estrategia-offline-first-y-manejo-de-errores" class="hash-link" aria-label="Enlace directo al estrategia-offline-first-y-manejo-de-errores" title="Enlace directo al estrategia-offline-first-y-manejo-de-errores">‚Äã</a></h2>
<ul>
<li><strong>Verificaci√≥n de conectividad:</strong> antes de cualquier operaci√≥n de red, la app consulta <code>connectivity_service.dart</code>.</li>
<li><strong>Almacenamiento temporal/local:</strong> formularios, encuestas y datos sensibles se guardan en <code>SecureStorage</code>/cach√© hasta su sincronizaci√≥n.</li>
<li><strong>Sincronizaci√≥n diferida:</strong> cuando vuelve la conectividad, los servicios <strong>reintentan</strong> el env√≠o/actualizaci√≥n.</li>
<li><strong>Manejo de errores:</strong> estandarizar respuestas (timeouts, 401/403, 5xx) mostrando mensajes √∫tiles y, en caso de 401/403, <strong>limpieza de sesi√≥n y redirecci√≥n a Login</strong>.</li>
</ul>
<p><strong>Diagrama de Secuencia ‚Äî Inicio de Sesi√≥n y Registro de Token FCM</strong></p>
<!-- -->
<p><strong>Diagrama de Secuencia ‚Äî Operaci√≥n Offline con Sincronizaci√≥n Posterior</strong></p>
<!-- -->
<p><strong>Diagrama de Flujo ‚Äî Notificaciones Push</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="flujo-de-notificaciones-push-en-sisa">Flujo de Notificaciones Push en SISA<a href="#flujo-de-notificaciones-push-en-sisa" class="hash-link" aria-label="Enlace directo al Flujo de Notificaciones Push en SISA" title="Enlace directo al Flujo de Notificaciones Push en SISA">‚Äã</a></h3>
<p>El siguiente diagrama describe c√≥mo viaja una notificaci√≥n desde el backend hasta la interfaz del usuario en la app m√≥vil:</p>
<ol>
<li>
<p><strong>Backend CLIAS</strong></p>
<ul>
<li>El servidor genera un evento (ej. resultado disponible, recordatorio).</li>
<li>Env√≠a una notificaci√≥n estructurada hacia <strong>Firebase Cloud Messaging (FCM)</strong>, incluyendo el <code>token</code> del dispositivo o el <code>topic</code> correspondiente.</li>
</ul>
</li>
<li>
<p><strong>Firebase Cloud Messaging (FCM)</strong></p>
<ul>
<li>Act√∫a como intermediario en la nube.</li>
<li>Recibe la notificaci√≥n y la direcciona al sistema operativo del dispositivo registrado.</li>
<li>Garantiza la entrega incluso si la app est√° en segundo plano.</li>
</ul>
</li>
<li>
<p><strong>Sistema Operativo del Dispositivo (Android/iOS)</strong></p>
<ul>
<li>Recibe el push y lo despacha a la aplicaci√≥n asociada.</li>
<li>Si la app est√° cerrada, muestra una notificaci√≥n nativa en la bandeja del sistema.</li>
<li>Si est√° abierta, env√≠a el evento directamente a la app.</li>
</ul>
</li>
<li>
<p><strong>App SISA</strong></p>
<ul>
<li>Capta la notificaci√≥n y la deriva al <strong>handler</strong> definido en Flutter.</li>
<li>Aqu√≠ se decide si la notificaci√≥n se muestra como banner emergente, badge o redirecci√≥n autom√°tica.</li>
</ul>
</li>
<li>
<p><strong><code>firebase_messaging_handler.dart</code></strong></p>
<ul>
<li>Gestiona la l√≥gica de recepci√≥n del mensaje.</li>
<li>Diferencia entre notificaci√≥n en <strong>foreground</strong> (app abierta), <strong>background</strong> o <strong>terminated</strong>.</li>
<li>Estandariza los datos recibidos antes de pasarlos al estado global.</li>
</ul>
</li>
<li>
<p><strong><code>notification_state.dart</code></strong></p>
<ul>
<li>Mantiene el estado actualizado de las notificaciones dentro de la app.</li>
<li>Permite que la interfaz se reactive autom√°ticamente cuando llega una nueva alerta.</li>
<li>Aqu√≠ se administran tambi√©n notificaciones le√≠das/no le√≠das.</li>
</ul>
</li>
<li>
<p><strong>Pantallas / Widgets (UI)</strong></p>
<ul>
<li>Finalmente, la informaci√≥n se refleja al usuario:<!-- -->
<ul>
<li><strong>Banners</strong>: mensajes visibles en la parte superior de la app.</li>
<li><strong>Badges</strong>: indicadores de cantidad de notificaciones pendientes.</li>
<li><strong>Rutas</strong>: redirecci√≥n autom√°tica a la pantalla relevante (ej. ver resultado).</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<p>üîë <strong>Idea central:</strong><br>
<!-- -->El flujo garantiza que <strong>todas las notificaciones viajen desde el backend hasta el usuario final</strong>, independientemente del estado de la aplicaci√≥n (abierta, minimizada o cerrada).</p>
<!-- -->
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="relaci√≥n-con-el-modelo-de-datos">Relaci√≥n con el Modelo de Datos<a href="#relaci√≥n-con-el-modelo-de-datos" class="hash-link" aria-label="Enlace directo al Relaci√≥n con el Modelo de Datos" title="Enlace directo al Relaci√≥n con el Modelo de Datos">‚Äã</a></h2>
<ul>
<li>La app <strong>consume/produce</strong> entidades que se corresponden con el <strong>modelo de datos del backend</strong> (ERD actualizado).</li>
<li>Desde la app se gestionan: <strong>Paciente, CuentaUsuario, Dispositivo, Sesi√≥n de Chat, Ex√°menes/Resultados, Archivos</strong>, entre otros.</li>
<li>La app no accede directamente a la base de datos; opera mediante <strong>APIs REST</strong> y mapea las respuestas a <strong>modelos locales</strong> para persistencia temporal y renderizado en UI.</li>
</ul>
<blockquote>
<p>El diagrama ERD de referencia es provisto por el equipo de backend y <strong>se mantiene fuera</strong> de esta documentaci√≥n (que se centra en el cliente m√≥vil).</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="consideraciones-de-dise√±o">Consideraciones de Dise√±o<a href="#consideraciones-de-dise√±o" class="hash-link" aria-label="Enlace directo al Consideraciones de Dise√±o" title="Enlace directo al Consideraciones de Dise√±o">‚Äã</a></h2>
<ul>
<li><strong>Modularidad:</strong> cada servicio encapsula una funcionalidad del dominio (auth, chat, encuestas, socioecon√≥mico, resultados, archivos, ubicaci√≥n, notificaciones).</li>
<li><strong>Trazabilidad:</strong> logs consistentes (errores y eventos clave) facilitan soporte y auditor√≠a.</li>
<li><strong>Extensibilidad:</strong> nuevos formularios o flujos reutilizan la misma ruta: UI ‚Üí Estado ‚Üí Servicio ‚Üí Almacenamiento/HTTP ‚Üí Backend.</li>
<li><strong>Seguridad:</strong> uso de <strong>JWT</strong> en cabeceras, almacenamiento m√≠nimo en dispositivo y respeto de pol√≠ticas de privacidad (ver cap√≠tulo <em>Seguridad y Privacidad</em>).</li>
</ul>
<hr>
<h1>Estructura de Directorios (gu√≠a general)</h1>
<p>La aplicaci√≥n SISA mantiene una estructura modular dentro de la carpeta <code>lib/</code>.<br>
<!-- -->Para una mejor comprensi√≥n, la estructura se divide en vistas generales y detalles por carpeta.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vista-general-del-√°rbol-lib">Vista general del √°rbol <code>lib/</code><a href="#vista-general-del-√°rbol-lib" class="hash-link" aria-label="Enlace directo al vista-general-del-√°rbol-lib" title="Enlace directo al vista-general-del-√°rbol-lib">‚Äã</a></h2>
<blockquote>
<p>Panorama r√°pido para ubicar carpetas principales.</p>
</blockquote>
<div style="display:flex;justify-content:center;margin:10px 0"><div style="transform:scale(0.9);transform-origin:top center;max-width:980px"></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="62-detalle-de-libservice">6.2 Detalle de <code>lib/service/</code><a href="#62-detalle-de-libservice" class="hash-link" aria-label="Enlace directo al 62-detalle-de-libservice" title="Enlace directo al 62-detalle-de-libservice">‚Äã</a></h2>
<blockquote>
<p>Servicios agrupados por <strong>dominio</strong> para compresi√≥n visual.</p>
</blockquote>
<div style="display:flex;justify-content:center;margin:10px 0"><div style="transform:scale(0.85);transform-origin:top center;max-width:980px"></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="63-detalle-de-libview">6.3 Detalle de <code>lib/view/</code><a href="#63-detalle-de-libview" class="hash-link" aria-label="Enlace directo al 63-detalle-de-libview" title="Enlace directo al 63-detalle-de-libview">‚Äã</a></h2>
<blockquote>
<p>Estructura sugerida de pantallas y componentes reutilizables.</p>
</blockquote>
<div style="display:flex;justify-content:center;margin:10px 0"><div style="transform:scale(0.9);transform-origin:top center;max-width:980px"></div></div>
<hr>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="qu√©-sigue">¬øQu√© sigue?<a href="#qu√©-sigue" class="hash-link" aria-label="Enlace directo al ¬øQu√© sigue?" title="Enlace directo al ¬øQu√© sigue?">‚Äã</a></h3>
<p>En los siguientes cap√≠tulos se detallan <strong>M√≥dulos Principales</strong>, <strong>Servicios y APIs</strong>, y <strong>Conectividad/Offline</strong>, reutilizando los diagramas y convenciones presentadas en esta arquitectura.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="P√°gina del documento"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/dev/frontend_app/introduccion_sisa"><div class="pagination-nav__sublabel">Anterior</div><div class="pagination-nav__label">Introducci√≥n</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/dev/frontend_app/modulos_principales"><div class="pagination-nav__sublabel">Siguiente</div><div class="pagination-nav__label">M√≥dulos Principales</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#vista-de-alto-nivel-app--servicios--backend" class="table-of-contents__link toc-highlight">Vista de Alto Nivel (App ‚Äì Servicios ‚Äì Backend)</a><ul><li><a href="#relaci√≥n-entre-las-capas-en-la-vista-de-alto-nivel" class="table-of-contents__link toc-highlight">Relaci√≥n entre las capas en la Vista de Alto Nivel</a></li></ul></li><li><a href="#arquitectura-interna-de-la-app-capas-y-m√≥dulos" class="table-of-contents__link toc-highlight">Arquitectura Interna de la App (capas y m√≥dulos)</a></li><li><a href="#estrategia-offline-first-y-manejo-de-errores" class="table-of-contents__link toc-highlight">Estrategia <em>Offline-First</em> y Manejo de Errores</a><ul><li><a href="#flujo-de-notificaciones-push-en-sisa" class="table-of-contents__link toc-highlight">Flujo de Notificaciones Push en SISA</a></li></ul></li><li><a href="#relaci√≥n-con-el-modelo-de-datos" class="table-of-contents__link toc-highlight">Relaci√≥n con el Modelo de Datos</a></li><li><a href="#consideraciones-de-dise√±o" class="table-of-contents__link toc-highlight">Consideraciones de Dise√±o</a></li><li><a href="#vista-general-del-√°rbol-lib" class="table-of-contents__link toc-highlight">Vista general del √°rbol <code>lib/</code></a></li><li><a href="#62-detalle-de-libservice" class="table-of-contents__link toc-highlight">6.2 Detalle de <code>lib/service/</code></a></li><li><a href="#63-detalle-de-libview" class="table-of-contents__link toc-highlight">6.3 Detalle de <code>lib/view/</code></a><ul><li><a href="#qu√©-sigue" class="table-of-contents__link toc-highlight">¬øQu√© sigue?</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">
        <div style="text-align: center; line-height: 1.6;">
          Universidad de Cuenca ‚Äì Grupo de Investigaci√≥n en Infraestructura de Datos Espaciales<br>
          Facultad de Ingenier√≠a. Departamento de Ciencias de la Computaci√≥n<br>
          Campus Balzay - V√≠ctor Manuel Albornoz y Av. de los Cerezos (Bloque A) | Tel√©fono: +593 7 413 4520 ext. 4790<br>
          Ing. Villie Morocho, PhD. | <a href="mailto:gi.ide@ucuenca.edu.ec">gi.ide@ucuenca.edu.ec</a><br><br>
          &copy; 2025 Universidad de Cuenca
        </div>
      </div></div></div></footer></div>
</body>
</html>